# ğŸ¤ é›¶å·®éŒ¯ AI èªéŸ³é»é¤ç³»çµ± - é …ç›®çµæ§‹

## ğŸ“ æ ¸å¿ƒæ–‡ä»¶çµæ§‹

```
é›¶å·®éŒ¯ AI èªéŸ³é»é¤ç³»çµ±/
â”œâ”€â”€ ğŸ“„ æ ¸å¿ƒé…ç½®
â”‚   â”œâ”€â”€ .env                    # ç’°å¢ƒè®Šé‡é…ç½®
â”‚   â”œâ”€â”€ config.py              # æ‡‰ç”¨ç¨‹åºé…ç½®
â”‚   â”œâ”€â”€ requirements.txt       # Python ä¾è³´åŒ…
â”‚   â””â”€â”€ run_dev.py            # é–‹ç™¼æœå‹™å™¨å•Ÿå‹•è…³æœ¬
â”‚
â”œâ”€â”€ ğŸš€ æ‡‰ç”¨ç¨‹åºæ ¸å¿ƒ
â”‚   â”œâ”€â”€ app.py                 # Flask æ‡‰ç”¨ç¨‹åºä¸»æ–‡ä»¶
â”‚   â””â”€â”€ README.md             # é …ç›®èªªæ˜æ–‡æª”
â”‚
â”œâ”€â”€ ğŸ—„ï¸ æ•¸æ“šæ¨¡å‹
â”‚   â””â”€â”€ models/
â”‚       â””â”€â”€ order.py          # è¨‚å–®æ•¸æ“šæ¨¡å‹
â”‚
â”œâ”€â”€ ğŸ”§ æ¥­å‹™æœå‹™
â”‚   â””â”€â”€ services/
â”‚       â”œâ”€â”€ speech_service.py     # Azure èªéŸ³è­˜åˆ¥æœå‹™
â”‚       â”œâ”€â”€ openrouter_service.py # OpenRouter AI æœå‹™
â”‚       â””â”€â”€ order_service.py      # è¨‚å–®è™•ç†æœå‹™
â”‚
â”œâ”€â”€ ğŸ›£ï¸ API è·¯ç”±
â”‚   â””â”€â”€ routes/
â”‚       â”œâ”€â”€ main_routes.py        # ä¸»è¦é é¢è·¯ç”±
â”‚       â”œâ”€â”€ speech_routes.py      # èªéŸ³è™•ç† API
â”‚       â””â”€â”€ order_routes.py       # è¨‚å–®è™•ç† API
â”‚
â”œâ”€â”€ ğŸ¨ å‰ç«¯è³‡æº
â”‚   â””â”€â”€ static/
â”‚       â”œâ”€â”€ ğŸ“„ HTML é é¢
â”‚       â”‚   â”œâ”€â”€ index.html        # ä¸»é é¢ï¼ˆé»é¤ç•Œé¢ï¼‰
â”‚       â”‚   â””â”€â”€ admin.html        # ç®¡ç†å“¡ç•Œé¢
â”‚       â”‚
â”‚       â”œâ”€â”€ ğŸ¨ æ¨£å¼æ–‡ä»¶
â”‚       â”‚   â””â”€â”€ css/
â”‚       â”‚       â”œâ”€â”€ style.css     # ä¸»é é¢æ¨£å¼
â”‚       â”‚       â””â”€â”€ admin.css     # ç®¡ç†å“¡é é¢æ¨£å¼
â”‚       â”‚
â”‚       â””â”€â”€ ğŸ’» JavaScript
â”‚           â””â”€â”€ js/
â”‚               â”œâ”€â”€ wav-recorder.js    # WAV éŒ„éŸ³å™¨ï¼ˆæ ¸å¿ƒï¼‰
â”‚               â”œâ”€â”€ voice-recorder.js  # èªéŸ³éŒ„éŸ³çµ„ä»¶
â”‚               â”œâ”€â”€ main.js           # ä¸»é é¢é‚è¼¯
â”‚               â”œâ”€â”€ order-display.js  # è¨‚å–®é¡¯ç¤ºçµ„ä»¶
â”‚               â””â”€â”€ admin-panel.js    # ç®¡ç†å“¡é¢æ¿é‚è¼¯
â”‚
â””â”€â”€ ğŸ”§ å·¥å…·æ¨¡å¡Š
    â””â”€â”€ utils/
        â””â”€â”€ logger.py             # æ—¥èªŒå·¥å…·
```

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½æ¨¡å¡Š

### 1. èªéŸ³è­˜åˆ¥ç³»çµ±
- **WAV éŒ„éŸ³å™¨** (`static/js/wav-recorder.js`)
  - ä½¿ç”¨ Web Audio API ç”Ÿæˆ WAV æ ¼å¼
  - 16kHz, 16-bit, å–®è²é“ï¼ˆAzure å„ªåŒ–ï¼‰
  - å¯¦æ™‚ PCM è½‰æ›

- **èªéŸ³æœå‹™** (`services/speech_service.py`)
  - Azure Speech Services é›†æˆ
  - éŸ³é »æ ¼å¼è™•ç†
  - å¤šèªè¨€æ”¯æ´ï¼ˆä¸­æ–‡ã€ç²µèªã€è‹±æ–‡ï¼‰

### 2. AI è¨‚å–®è§£æ
- **OpenRouter æœå‹™** (`services/openrouter_service.py`)
  - ä½¿ç”¨å…è²» Grok-4-Fast æ¨¡å‹
  - æ™ºèƒ½è¨‚å–®è§£æ
  - è¿½åŠ éŠ·å”®å»ºè­°ç”Ÿæˆ

### 3. è¨‚å–®ç®¡ç†
- **è¨‚å–®æœå‹™** (`services/order_service.py`)
  - è¨‚å–®å‰µå»ºå’Œç®¡ç†
  - ç‹€æ…‹è¿½è¹¤
  - æ•¸æ“šæŒä¹…åŒ–

### 4. ç”¨æˆ¶ç•Œé¢
- **ä¸»é é¢** (`static/index.html`)
  - èªéŸ³é»é¤ç•Œé¢
  - å¯¦æ™‚è¨‚å–®é¡¯ç¤º
  - è¿½åŠ éŠ·å”®å»ºè­°

- **ç®¡ç†å“¡ç•Œé¢** (`static/admin.html`)
  - è¨‚å–®ç®¡ç†
  - ç³»çµ±ç›£æ§
  - æ•¸æ“šçµ±è¨ˆ

## ğŸ”‘ é—œéµé…ç½®

### ç’°å¢ƒè®Šé‡ (`.env`)
```env
# Azure Speech Services
AZURE_SPEECH_KEY=your_azure_key
AZURE_SPEECH_REGION=eastasia

# OpenRouter API
OPENROUTER_API_KEY=your_openrouter_key
OPENROUTER_MODEL=x-ai/grok-4-fast:free

# æ‡‰ç”¨ç¨‹åºè¨­ç½®
SITE_URL=http://localhost:5000
SITE_NAME=é›¶å·®éŒ¯ AI èªéŸ³é»é¤ç³»çµ±
```

### Python ä¾è³´ (`requirements.txt`)
- Flask: Web æ¡†æ¶
- azure-cognitiveservices-speech: Azure èªéŸ³æœå‹™
- openai: OpenRouter API å®¢æˆ¶ç«¯
- pydub: éŸ³é »è™•ç†ï¼ˆå‚™ç”¨ï¼‰

## ğŸš€ å•Ÿå‹•æ–¹å¼

```bash
# å®‰è£ä¾è³´
pip install -r requirements.txt

# å•Ÿå‹•é–‹ç™¼æœå‹™å™¨
python run_dev.py

# è¨ªå•æ‡‰ç”¨ç¨‹åº
# ä¸»é é¢: http://localhost:5000
# ç®¡ç†å“¡: http://localhost:5000/admin
```

## ğŸ‰ ç³»çµ±ç‰¹è‰²

- âœ… **çœŸå¯¦èªéŸ³è­˜åˆ¥**: Azure Speech Services
- âœ… **æ™ºèƒ½è¨‚å–®è§£æ**: OpenRouter + Grok AI
- âœ… **WAV æ ¼å¼éŒ„éŸ³**: æœ€ä½³å…¼å®¹æ€§
- âœ… **å¤šèªè¨€æ”¯æ´**: ä¸­æ–‡ã€ç²µèªã€è‹±æ–‡
- âœ… **è¿½åŠ éŠ·å”®**: AI é©…å‹•çš„å»ºè­°ç³»çµ±
- âœ… **å®Œæ•´ç®¡ç†**: è¨‚å–®è¿½è¹¤å’Œç®¡ç†
- âœ… **éŸ¿æ‡‰å¼è¨­è¨ˆ**: é©é…å„ç¨®è¨­å‚™

é€™æ˜¯ä¸€å€‹å®Œæ•´ã€å°ˆæ¥­çš„ AI èªéŸ³é»é¤ç³»çµ±ï¼ğŸ¤ğŸµâœ¨