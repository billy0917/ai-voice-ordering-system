<!DOCTYPE html>
<html lang="zh-HK" class="h-full">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>零差錯 AI 語音點餐系統</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="/static/css/performance-optimized.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'chinese': ['PingFang SC', 'Microsoft YaHei', 'Helvetica Neue', 'Arial', 'sans-serif']
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'slide-up': 'slideUp 0.3s ease-out',
                        'fade-in': 'fadeIn 0.3s ease-out'
                    },
                    keyframes: {
                        slideUp: {
                            '0%': { transform: 'translateY(10px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' }
                        },
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' }
                        }
                    },

                }
            }
        }
    </script>
    <style>
        .glass-morphism {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .gradient-bg {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
        }

        .text-shadow {
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .recording-pulse {
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.6;
            }
        }

        .hidden {
            display: none !important;
        }

        /* 自定義滾動條樣式 */
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: rgba(16, 185, 129, 0.6);
            border-radius: 3px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: rgba(16, 185, 129, 0.8);
        }

        /* 隱藏滾動條 */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>

<body class="h-full font-chinese overflow-auto">
    <!-- 背景圖片 -->
    <div class="fixed inset-0 z-0">
        <img src="https://images.unsplash.com/photo-1514933651103-005eec06c04b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=60"
            alt="Restaurant Background" class="w-full h-full object-cover" loading="lazy">
        <div class="absolute inset-0 gradient-bg opacity-80"></div>
    </div>

    <!-- 主容器 -->
    <div class="relative z-10 h-full flex flex-col">
        <!-- 頂部標題區域 -->
        <header class="flex-shrink-0 text-center py-8 px-6">
            <div class="glass-morphism rounded-3xl p-6 mx-auto max-w-2xl animate-fade-in">
                <h1 class="text-4xl md:text-5xl font-bold text-white mb-3 text-shadow">
                    <i class="fas fa-microphone-alt mr-3 text-emerald-300"></i>
                    零差錯 AI 語音點餐
                </h1>
                <p class="text-xl text-gray-100 text-shadow">
                    用港式粵語輕鬆點餐 · 智能識別 · 零差錯體驗
                </p>
            </div>
        </header>

        <!-- 主內容區域 -->
        <main class="flex-1 flex flex-col px-6 pb-6">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">

                <!-- 左側：語音錄製區域 -->
                <div class="flex flex-col space-y-6">
                    <!-- 語音錄製按鈕 -->
                    <div class="glass-card rounded-3xl p-8 text-center animate-slide-up">
                        <div class="mb-6">
                            <button id="recordBtn"
                                class="group relative w-32 h-32 mx-auto rounded-full bg-emerald-600 hover:bg-emerald-700 transition-colors duration-200 shadow-lg">
                                <div class="absolute inset-2 rounded-full bg-white/20 flex items-center justify-center">
                                    <i id="recordIcon"
                                        class="fas fa-microphone text-3xl text-white group-hover:scale-110 transition-transform duration-300"></i>
                                </div>
                            </button>
                        </div>

                        <div class="space-y-2">
                            <p id="recordText" class="text-xl font-semibold text-white">點擊說話</p>
                            <p class="text-gray-300 text-sm">支援粵語、國語、英語</p>
                            <p class="text-gray-400 text-xs mt-2">💡 說話時可以有停頓，系統會等待您說完</p>
                        </div>

                        <!-- 錄音狀態 -->
                        <div id="recordingStatus" class="hidden mt-4 p-4 glass-morphism rounded-2xl">
                            <div class="flex items-center justify-center space-x-3">
                                <div class="w-3 h-3 bg-emerald-500 rounded-full recording-pulse"></div>
                                <span class="text-white font-medium">錄音中...</span>
                            </div>
                        </div>
                    </div>

                    <!-- 語音識別結果 -->
                    <div id="transcriptionResult" class="hidden glass-card rounded-3xl p-6 animate-slide-up">
                        <div class="flex items-start space-x-4">
                            <div
                                class="w-10 h-10 bg-slate-600 rounded-full flex items-center justify-center flex-shrink-0">
                                <i class="fas fa-comment-dots text-white"></i>
                            </div>
                            <div class="flex-1 min-w-0">
                                <h3 class="text-lg font-semibold text-white mb-2">語音識別結果</h3>
                                <p id="transcriptionText" class="text-gray-200 text-lg leading-relaxed mb-3"></p>
                                <div class="flex items-center space-x-2">
                                    <span class="text-sm text-gray-300">信心度:</span>
                                    <span id="confidenceScore" class="text-sm font-semibold text-emerald-300">0%</span>
                                    <div class="flex-1 bg-white/20 rounded-full h-2 ml-2">
                                        <div id="confidenceBar"
                                            class="bg-emerald-500 h-2 rounded-full transition-all duration-300"
                                            style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 右側：訂單顯示區域 -->
                <div class="flex flex-col space-y-6">
                    <!-- 訂單內容 -->
                    <div id="orderSection" class="hidden glass-card rounded-3xl p-6 animate-slide-up">
                        <div class="flex items-center space-x-3 mb-6">
                            <div class="w-10 h-10 bg-slate-600 rounded-full flex items-center justify-center">
                                <i class="fas fa-shopping-cart text-white"></i>
                            </div>
                            <h2 class="text-2xl font-bold text-white">您的訂單</h2>
                        </div>

                        <div id="orderDisplay" class="space-y-4 max-h-80 overflow-y-auto pr-2 custom-scrollbar">
                            <!-- 訂單項目將在這裡顯示 -->
                        </div>

                        <!-- 推薦加購 -->
                        <div id="upsellingSection"
                            class="hidden mt-6 p-4 bg-amber-500/20 rounded-2xl border border-amber-400/30">
                            <div class="flex items-center space-x-2 mb-3">
                                <i class="fas fa-star text-amber-300"></i>
                                <h3 class="text-lg font-semibold text-white">推薦加購</h3>
                            </div>
                            <div id="upsellingSuggestions" class="space-y-2">
                                <!-- 推薦項目將在這裡顯示 -->
                            </div>
                        </div>

                        <!-- 操作按鈕 -->
                        <div class="flex space-x-4 mt-6 pt-4 border-t border-white/20">
                            <button id="confirmBtn"
                                class="flex-1 bg-emerald-600 hover:bg-emerald-700 text-white font-semibold py-3 px-6 rounded-2xl transition-colors duration-200">
                                <i class="fas fa-check mr-2"></i>確認訂單
                            </button>
                            <button id="modifyBtn"
                                class="flex-1 bg-slate-600 hover:bg-slate-700 text-white font-semibold py-3 px-6 rounded-2xl transition-colors duration-200">
                                <i class="fas fa-edit mr-2"></i>修改訂單
                            </button>
                        </div>
                    </div>

                    <!-- 訂單狀態 -->
                    <div id="statusSection" class="hidden glass-card rounded-3xl p-6 animate-slide-up">
                        <div class="flex items-center space-x-3 mb-6">
                            <div class="w-10 h-10 bg-slate-600 rounded-full flex items-center justify-center">
                                <i class="fas fa-clock text-white"></i>
                            </div>
                            <h2 class="text-2xl font-bold text-white">訂單狀態</h2>
                        </div>

                        <div id="orderStatus" class="space-y-4">
                            <div class="flex justify-between items-center p-4 glass-morphism rounded-2xl">
                                <span class="text-gray-300">訂單號碼</span>
                                <span id="orderNumber" class="text-white font-semibold">-</span>
                            </div>
                            <div class="flex justify-between items-center p-4 glass-morphism rounded-2xl">
                                <span class="text-gray-300">當前狀態</span>
                                <span id="currentStatus" class="text-white font-semibold">-</span>
                            </div>
                            <div class="flex justify-between items-center p-4 glass-morphism rounded-2xl">
                                <span class="text-gray-300">預計完成時間</span>
                                <span id="estimatedTime" class="text-white font-semibold">-</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>


    </div>

    <!-- 處理中狀態覆蓋層 -->
    <div id="processingOverlay" class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black/50">
        <div class="glass-card rounded-3xl p-8 text-center max-w-sm mx-4">
            <div class="w-16 h-16 mx-auto mb-4 relative">
                <div class="absolute inset-0 border-4 border-gray-300 rounded-full"></div>
                <div
                    class="absolute inset-0 border-4 border-emerald-500 rounded-full border-t-transparent animate-spin">
                </div>
            </div>
            <p id="processingText" class="text-white text-lg font-medium">正在處理中...</p>
        </div>
    </div>

    <!-- 通知系統 -->
    <div id="notificationContainer" class="fixed top-6 right-6 z-40 space-y-3 max-w-sm">
        <!-- 通知將在這裡動態添加 -->
    </div>

    <script src="/static/js/performance-optimizer.js"></script>
    <script src="/static/js/order-display-optimized.js"></script>
    <script src="/static/js/voice-recorder.js"></script>
    <script src="/static/js/main.js"></script>
    <script src="/debug_order_flow.js"></script>
</body>

</html>